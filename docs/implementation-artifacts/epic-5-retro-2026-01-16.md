# Epic 5 复盘（Retrospective）

- 项目：Prompt Faster
- Epic：5（可视化与实时反馈）
- 日期：2026-01-16
- 复盘主持：Bob（Scrum Master）
- 参会：耶稣（Project Lead）、Alice（Product Owner）、Charlie（Senior Dev）、Dana（QA Engineer）、Winston（Architect）、Amelia（Dev Agent）

## 1) Epic 概览

- 完成度：4/4 stories（5.1–5.4 均为 done）
- 交付范围：节点图基础渲染、边动画数据流、流式思考面板、环节标识与历史摘要
- 覆盖目标：FR35–FR39、NFR2（首字节反馈）、NFR3（节点图性能）、AR2（correlationId 透传）

## 2) 做得好的地方（What went well）

1. **可视化链路闭环**
   - 节点图 → 边动画 → 思考流式 → 环节标识形成完整体验，用户对“黑盒”感知显著降低。
2. **确定性与可回归作为默认文化**
   - demo 数据源不出网、可复现；NFR2/NFR3 回归入口稳定，复盘与质量门禁更有证据链。
3. **契约与脱敏门禁落地**
   - WS 事件与阶段语义有单一权威入口，前端不再“脑补”，避免漂移与泄露风险。

## 3) 遇到的挑战（What didn’t / friction）

1. **Epic 状态与 Story 完成度不同步**
   - Epic 5 在 sprint-status 仍是 in-progress，但 Stories 已全部 done，流程收敛存在落差。
2. **Review Notes 有 placeholder 残留（Story 5.3）**
   - 表明“证据链完整性”仍可能被遗漏，需要更早、更强制的校验。
3. **构建产物体积告警（Story 5.4）**
   - chunk > 500KB 的技术债已识别，但尚未形成可执行跟踪项。

## 4) 关键洞察（Key insights）

- **状态一致性也是质量门禁的一部分**：Epic 状态必须与 Story 完成度同步，否则会削弱复盘与治理可信度。
- **复盘证据链需要“前置 + 自动化”**：靠人工回忆和后置 review 容易漏项。
- **可视化扩展即将进入“体量治理期”**：随着 UI 与动画增多，构建体积与性能将成为持续关注点。

## 5) 行动项（Action items）

> 规则：不写工期预估；以“成功标准 + Owner”表达。
> 跟踪文件：`docs/implementation-artifacts/epic-5-retro-action-items-2026-01-16.md`

### A) 流程改进（Process）

1. **Epic 状态收敛门禁**
   - Owner：Bob（Scrum Master）+ Charlie（Senior Dev）
   - 成功标准：当某 Epic 全部 Story 变为 done 时，同步更新 epic-X 为 done，且 retro 状态同步明确（done/optional）。
   - 证据：`docs/implementation-artifacts/sprint-status.yaml` 状态一致性更新记录

2. **Review Notes 完整性门禁**
   - Owner：Dana（QA Engineer）+ Amelia（Dev Agent）
   - 成功标准：每个 story 的 Review Notes 不得保留 placeholder；若无内容需写明“无新增发现”。
   - 证据：对应 story 文件 Review Notes 结构完整且无占位符

### B) 技术债（Technical debt）

3. **构建体积告警跟踪**
   - Owner：Winston（Architect）
   - 成功标准：记录 chunk 体积告警、原因分析与拆分候选方案，并形成后续 Epic 的可执行拆分任务。
   - 证据：新增“构建体积告警”记录文档或在后续 story 中落地拆分任务
   - 记录：`docs/implementation-artifacts/epic-5-build-size-warning-2026-01-16.md`

## 6) 下一 Epic（Epic 6）准备与风险

- **目标预览**：用户介入与控制（暂停/恢复、编辑中间产物、对话引导、历史查看）。
- **依赖前置**：可视化链路已闭环；WS 契约与阶段语义权威已建立。
- **准备建议**：
  - 在用户介入功能启动前，先明确“暂停/编辑/继续”的状态一致性与权限边界。
  - 在 UI 层补齐“用户介入的可追踪证据链”（日志、状态回放入口）。
  - 同步跟踪构建体积告警并评估拆分方案（见 `docs/implementation-artifacts/epic-5-build-size-warning-2026-01-16.md`）。

## 7) 结语

- Epic 5 证明了“透明可视化”是核心体验的加速器，也是 Epic 6 用户介入能力的稳定基础。
- 下一步的重点是：把状态一致性与复盘证据链内化为默认流程门禁，减少后续返工与不确定性。
