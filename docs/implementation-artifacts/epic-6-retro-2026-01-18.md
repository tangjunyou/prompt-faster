# Epic 6 复盘（Retrospective）

- 项目：Prompt Faster
- Epic：6（用户介入与控制）
- 日期：2026-01-18
- 复盘主持：Bob（Scrum Master）
- 参会：耶稣（Project Lead）、Alice（Product Owner）、Charlie（Senior Dev）、Dana（QA Engineer）、Winston（Architect）、Amelia（Dev Agent）

## 1) Epic 概览

- 完成度：5/5 stories（6.1–6.5 全部 done）
- 交付范围：暂停/继续、编辑中间产物、对话引导、历史产物查看、增加轮数/手动终止
- 关键门槛：A1 状态一致性与权限边界、A2 可追踪证据链（已落地）
- 关键未闭环：A3 构建体积告警拆分评估（未完成）

## 2) 做得好的地方（What went well）

1. **用户介入闭环落地**
   - 暂停/编辑/引导/历史/终止形成完整闭环，用户掌控感显著提升。
2. **可追踪性成为默认门槛**
   - correlationId 与日志字段成为硬要求，A2 证据链得到落实。
3. **复用策略降低架构分叉**
   - 历史只读模式复用 ArtifactEditor，避免新分支架构。

## 3) 遇到的挑战（What didn’t / friction）

1. **跨 Story 规范分散**
   - 日志字段、correlationId、gen-types、状态一致性反复补齐。
2. **最小暂停持久化成为关键路径**
   - 多 Story 依赖 pause_state，改动牵连面大。
3. **A3 构建体积告警仍未落地**
   - 已识别风险但尚未形成可执行拆分任务。

## 4) 关键洞察（Key insights）

- **门槛前置优于复盘补齐**：将共性规范前置到统一清单可显著减少返工。
- **收敛路径是 Epic 7 成败关键**：Checkpoint 必须接管 pause_state 且统一历史口径。
- **历史口径统一是系统性问题**：iterations 与 checkpoints 若不统一，将产生数据漂移风险。

## 5) 上一 Epic 复盘承诺对账（Epic 5）

- ✅ A1 状态一致性与权限边界：已完成并成为 Epic 6 开工门槛
- ✅ A2 可追踪证据链：已完成并落实到日志与审计要求
- ⏳ A3 构建体积告警拆分评估：未完成（仍需落实）

## 6) Epic 7 预览与影响

- Epic 7：可靠性与断点续跑
- 关键依赖：
  - Epic 4 的迭代引擎
  - Epic 6 的 pause_state 与用户介入状态
- 影响判断：Epic 7 需先完成规划复核并更新路径（收敛策略与历史口径）

## 7) 行动项（Action Items）

### Process Improvements
1. **建立跨 Story 硬门禁清单**（日志字段 / correlationId / gen-types / 状态一致性）
   - Owner：Bob（Scrum Master）+ Dana（QA Engineer）
   - 里程碑：Epic 7 kickoff 前
   - 成功标准：Review Notes 中必须包含并勾选清单项

2. **建立 Epic 指标记录机制**（减少“未追踪”）
   - Owner：Bob（Scrum Master）+ Alice（Product Owner）
   - 里程碑：Epic 7 kickoff 前
   - 成功标准：每个 Epic 结束时产出完整指标记录

### Technical Debt
3. **A3 构建体积告警拆分评估落实**
   - Owner：Winston（Architect）
   - Priority：高
   - 成功标准：形成可执行拆分方案清单，并落地为 Epic 7 任务

4. **pause_state 临时实现与 Checkpoint 收敛替换**
   - Owner：Winston（Architect）+ Charlie（Senior Dev）
   - Priority：高
   - 成功标准：收敛设计通过评审并明确落点与迁移策略

## 8) Epic 7 准备项（Preparation Tasks）

- [ ] Checkpoint ↔ pause_state 收敛设计
  - Owner：Winston + Charlie

- [ ] iterations ↔ checkpoints 历史口径统一策略
  - Owner：Winston + Dana

- [ ] 恢复/回滚测试矩阵与脚本
  - Owner：Dana + Amelia

- [ ] A3 构建体积告警拆分方案落地
  - Owner：Winston

## 9) Critical Path（关键路径）

1. Checkpoint ↔ pause_state 收敛设计（Owner: Winston + Charlie）
2. 历史口径统一（iterations ↔ checkpoints）（Owner: Winston + Dana）
3. 恢复/回滚测试矩阵（Owner: Dana + Amelia）
4. Epic 7 规划复核会议（Owner: Alice + Bob）

## 10) 重大变更判断（Significant Discovery）

- 结论：**需要更新 Epic 7 计划**
- 原因：收敛路径与历史口径尚未明确，直接开工会导致实现偏差与重复路径。

## 11) 就绪性评估（Readiness Assessment）

- 测试与质量：回归与集成测试已执行；覆盖率等指标未记录
- 部署状态：仅本地运行形态，未记录生产验收
- 利益相关方验收：未记录外部验收
- 技术健康：可用，但关键技术债（A3/收敛路径/历史口径）未闭环
- 阻塞项：已列入 Critical Path

## 12) 承诺与下一步（Commitments & Next Steps）

- Action Items：4
- Preparation Tasks：4
- Critical Path：4
- **重要：Epic 7 需先完成规划复核与关键路径，再启动实施**

---

Bob (Scrum Master): “今天的复盘结论清晰，改进路径明确。谢谢大家。”
